{ "oneOf": [

    { "title": "hourly billing project",
      "type": "object",
      "properties": {
        "approval": { "$ref": "#/definitions/approval" },
        "client": { "$ref": "#/definitions/client" },
        "completed": { "$ref": "#/definitions/completed" },
        "contacts": { "$ref": "#/definitions/contacts" },
        "method": { "enum": [ "hourly" ] },
        "parties": { "$ref": "#/definitions/parties" },
        "project": { "$ref": "#/definitions/project" },
        "tags": { "$ref": "#/definitions/tags" },
        "service": { "$ref": "#/definitions/service" } },
      "required": [
        "approval", "client", "contacts", "method", "parties",
        "project", "tags", "service" ],
      "additionalProperties": false },

    { "title": "estimated project",
      "type": "object",
      "properties": {
        "approval": { "$ref": "#/definitions/approval" },
        "client": { "$ref": "#/definitions/client" },
        "completed": { "$ref": "#/definitions/completed" },
        "contacts": { "$ref": "#/definitions/contacts" },
        "estimate": { "type": "integer", "minimum": 1 },
        "method": { "enum": [ "estimate" ] },
        "parties": { "$ref": "#/definitions/parties" },
        "project": { "$ref": "#/definitions/project" },
        "tags": { "$ref": "#/definitions/tags" },
        "service": { "$ref": "#/definitions/service" } },
      "required": [
        "approval", "client", "contacts", "method", "parties",
        "project", "tags", "service" ],
      "additionalProperties": false } ],

  "definitions": {

    "approval": {
      "title": "project approval",
      "properties": {
        "by": { "type": "string" },
        "date": { "type": "string", "format": "date-time" },
        "method": {
          "type": "string",
          "enum": [ "e-mail", "GitHub", "conversation" ] } },
      "required": [ "by", "date", "method" ],
      "additionalProperties": false },

    "client": { "type": "string" },

    "completed": {
      "title": "date of completion",
      "type": "string",
      "format": "date-time" },

    "contacts": {
      "title": "project contacts",
      "description": "client personnel involved in the project",
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "parties": {
      "title": "counterparties",
      "type": "array",
      "items": { "type": "string" },
      "uniqueItems": true},

    "project": {
      "title": "project title",
      "type": "string" },

    "tags": {
      "title": "project metadata tags",
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "totalTimeEntry": {
      "title": "total time entry",
      "description": "entry of total time served",
      "type": "object",
      "properties": {
        "adjustment": { "$ref": "#/definitions/adjustment" },
        "bill": { "$ref": "#/definitions/bill" },
        "date": { "type": "string", "format": "date-time" },
        "narrative": { "$ref": "#/definitions/narrative" },
        "rate": { "$ref": "#/definitions/rate" },
        "time": {
          "type": "number",
          "multipleOf": 0.25,
          "minimum": 0.25 } },
      "required": [ "date", "rate", "time", "narrative" ],
      "additionalProperties": false },

    "startEndEntry": {
      "title": "time span entry",
      "description": "entry of a span of time served",
      "type": "object",
      "properties": {
        "adjustment": { "$ref": "#/definitions/adjustment" },
        "bill": { "$ref": "#/definitions/bill" },
        "end": { "type": "string", "format": "date-time" },
        "narrative": { "$ref": "#/definitions/narrative" },
        "rate": { "$ref": "#/definitions/rate" },
        "start": { "type": "string", "format": "date-time" } },
      "required": [ "end", "narrative", "rate", "start" ],
      "additionalProperties": false },

    "adjustment": {
      "title": "time entry manual adjustment",
      "type": "number",
      "multipleOf": 0.25 },

    "bill": {
      "description": "whether to bill for an entry",
      "type": "boolean" },

    "narrative": {
      "title": "narrative",
      "description": "list of tasks performed",
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "rate": {
      "title": "billing rate",
      "type": "integer",
      "minimum": 1 },

    "service": {
      "title": "list of service entries",
      "type": "array",
      "items": {
        "oneOf": [
          { "$ref": "#/definitions/totalTimeEntry" },
          { "$ref": "#/definitions/startEndEntry" } ] },
      "minItems": 1 } } }
