{ "oneOf": [

    { "type": "object",
      "properties": {
        "approval": {
          "$ref": "#/definitions/approval" },
        "client": {
          "$ref": "#/definitions/client" },
        "contacts": {
          "$ref": "#/definitions/contacts" },
        "method": {
          "enum": [
            "hourly" ] },
        "parties": {
          "$ref": "#/definitions/parties" },
        "project": {
          "$ref": "#/definitions/project" },
        "tags": {
          "$ref": "#/definitions/tags" },
        "service": {
          "$ref": "#/definitions/service" } },
      "required": [
        "approval",
        "client",
        "contacts",
        "method",
        "parties",
        "project",
        "tags",
        "service" ],
      "additionalProperties": false },

    { "type": "object",
      "properties": {
        "approval": {
          "$ref": "#/definitions/approval" },
        "client": {
          "$ref": "#/definitions/client" },
        "contacts": {
          "$ref": "#/definitions/contacts" },
        "estimate": {
          "type": "integer",
          "minimum": 1 },
        "method": {
          "enum": [
            "estimate" ] },
        "parties": {
          "$ref": "#/definitions/parties" },
        "project": {
          "$ref": "#/definitions/project" },
        "tags": {
          "$ref": "#/definitions/tags" },
        "service": {
          "$ref": "#/definitions/service" } },
      "required": [
        "approval",
        "client",
        "contacts",
        "method",
        "parties",
        "project",
        "tags",
        "service" ],
      "additionalProperties": false } ],

  "definitions": {

    "approval": {
      "properties": {
        "by": {
          "type": "string" },
        "date": {
          "type": "string",
          "format": "date-time" },
        "method": {
          "type": "string",
          "enum": [
            "e-mail",
            "GitHub",
            "conversation" ] } },
      "required": [
        "by",
        "date",
        "method" ],
      "additionalProperties": false },

    "client": {
      "type": "string" },

    "contacts": {
      "type": "array",
      "items": {
        "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "parties": {
      "type": "array",
      "items": {
        "type": "string" },
      "uniqueItems": true},

    "project": {
      "type": "string" },

    "tags": {
      "type": "array",
      "items": {
        "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "timeEntry": {
      "type": "object",
      "properties": {
        "adjustment": {
          "$ref": "#/definitions/adjustment" },
        "bill": {
          "$ref": "#/definitions/bill" },
        "date": {
          "type": "string",
          "format": "date-time" },
        "narrative": {
          "$ref": "#/definitions/narrative" },
        "rate": {
          "$ref": "#/definitions/rate" },
        "time": {
          "type": "number",
          "multipleOf": 0.25,
          "minimum": 0.25 } },
      "required": [
        "date",
        "rate",
        "time",
        "narrative" ],
      "additionalProperties": false },

    "startEndEntry": {
      "type": "object",
      "properties": {
        "adjustment": {
          "$ref": "#/definitions/adjustment" },
        "bill": {
          "$ref": "#/definitions/bill" },
        "end": {
          "type": "string",
          "format": "date-time" },
        "narrative": {
          "$ref": "#/definitions/narrative" },
        "rate": {
          "$ref": "#/definitions/rate" },
        "start": {
          "type": "string",
          "format": "date-time" } },
      "required": [
        "end",
        "narrative",
        "rate",
        "start" ],
      "additionalProperties": false },

    "adjustment": {
      "type": "number",
      "multipleOf": 0.25 },

    "bill": {
      "type": "boolean" },

    "narrative": {
      "type": "array",
      "items": {
        "type": "string" },
      "minItems": 1,
      "uniqueItems": true },

    "rate": {
      "type": "integer",
      "minimum": 1 },

    "service": {
      "type": "array",
      "items": {
        "oneOf": [
          { "$ref": "#/definitions/timeEntry" },
          { "$ref": "#/definitions/startEndEntry" } ] },
      "minItems": 1 } } }
